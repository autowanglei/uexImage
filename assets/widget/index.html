<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport"
          content="width=device-width, initial-scale=1, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" type="text/css" href="css/index.css">

    <script type="text/javascript">
	function openPicker() {
		uexImage.onPickerClosed = onPickerClosed;
		var params = {
			min : "1",
			max : "1",
			quality : "0.5",
//			usePng : "false",
//			detailedInfo : "true",
            //"viewFramePicPreview":{   //位置、大小
            //    x:0,
            //    y:0,
            //    w:720, //w:1080,
            //    h:1137, //h:1767
            //},
//            "style" : 1,
            //"viewFramePicGrid":{   //位置、大小
            //    x:0,
            //    y:0,
            //    w:720, //w:1080,
            //    h:1137, //h:1767
            //}
		};
		var data = JSON.stringify(params);
		uexImage.openPicker(data);
	}

	
    function createActionSheet(){

//        uexActionSheet.onClickItem = onClickItem;

        

        var x = 0;

        var y = 0;//没有用

        var width = 0;//如果传0，默认是屏幕宽度

        var height = 0;//没用的高度

        

        //var JsonData = '{"actionSheet_style":{"frameBgColor":"#ffffff","frameBroundColor":"#ff0000","frameBgImg":"","btnSelectBgImg":"res://btn-act.png","btnUnSelectBgImg":"res://btn.png","cancelBtnSelectBgImg":"res://cancel-act.png","cancelBtnUnSelectBgImg":"res://cancel.png","textSize":"17","textColor":"#ffffff","actionSheetList":[{"name":"新浪微博"},{"name":"腾讯微博"},{"name":"分享"}]}}';
        
        var JsonData = '{"actionSheet_style":{"frameBgColor":"#ffffff","frameBroundColor":"#ff0000","frameBgImg":"","btnSelectBgImg":"res://btn-act.png","btnUnSelectBgImg":"res://btn.png","cancelBtnSelectBgImg":"res://cancel-act.png","cancelBtnUnSelectBgImg":"res://cancel.png","textSize":"17","textNColor":"#ffffff","textHColor":"#ffffff", "cancelTextNColor":"#ffffff","cancelTextHColor":"#ffffff", "actionSheetList":[{"name":"新浪微博"},{"name":"腾讯微博"},{"name":"分享"}]}}';

        uexActionSheet.open(x,y,width,height,JsonData);

    }
	
	function openBrowser() {
		var params = {
			"startIndex" : 1,
			"style" : 1,
			data:["res://1016.jpg","res://photo2.jpg","res://photo3.jpg"],
//			data : [
//					{
//						"src" : "res://1016.jpg"
//					},
//					{
//					    "src" : "res://photo2.jpg"
//					},
//					{
//					    "src" : "res://photo3.jpg"
//					},
//					{
//					    "src" : "res://photo4.jpg"
//					},
//					{
//					    "src" : "res://photo4t.jpg"
//					},
//					{
//						"src" : "res://photo1.jpg"
//					}
//				   ],
		};
		params.style = document.getElementById("UIStyle").value;
		var data = JSON.stringify(params);
		uexImage.openBrowser(data);
		
	}
	function openPickerForCropper() {
		uexImage.onPickerClosed = onPickerClosedForCropper;
		var params = {
			min : "1",
			max : "1",
			quality : "1",
			usePng : "false",
			detailedInfo : "false"
		};
		var data = JSON.stringify(params);
		uexImage.openPicker(data);
	}
	function openCropper() {
		var params = {
			//src : document.getElementById("selectPath").innerHTML,
			src: "res://1016.jpg",
			usePng : "true",
			mode : "1"
		};
		var data = JSON.stringify(params);
		uexImage.openCropper(data);
	}

	function saveToPhotoAlbum() {
		var params = {
			localPath : "res://1016.jpg",
			extraInfo : ""
		};
		var data = JSON.stringify(params);
		uexImage.saveToPhotoAlbum(data);
	}

	function clearOutputImages() {
		var params = {
			localPath : "",
			extraInfo : ""
		};
		var data = JSON.stringify(params);
		uexImage.clearOutputImages(data);
	}
	
	function compressImage() {
        var params = {
                srcPath : "/storage/emulated/0/DCIM/Camera/IMG_20161010_093830.jpg",
                desLength : 30*1024
        };
        var data = JSON.stringify(params);
        uexImage.compressImage(data);
	}

	window.uexOnload = function(type) {
		if (type == 0) {
			uexImage.cbOpenPicker = cbOpenPicker;
			uexImage.onBrowserClosed = onBrowserClosed;
			uexImage.onCropperClosed = onCropperClosed;
			uexImage.cbSaveToPhotoAlbum = cbSaveToPhotoAlbum;
			uexImage.cbClearOutputImages = cbClearOutputImages;
			uexImage.onImageLongClicked = onImageLongClicked;
			uexImage.cbCompressImage = cbCompressImage;
		}
	}

	function onImageLongClicked(info) {
		alert("onImageLongClicked:" + info);

        createActionSheet();
	}
	
	function cbOpenPicker(info) {
	    alert("cbOpenPicker:" + info);
	}
	function cbCompressImage(info) {
	    alert("cbCompressImage:" + info);
	}
	function onPickerClosed(info) {
		alert("onPickerClosed:" + info);
	}
	function onBrowserClosed(info) {
		alert("onBrowserClosed:" + info);
	}
	function onPickerClosedForCropper(info) {
		alert(info);
		var info = eval('(' + info + ')');
		if(!info.isCancelled){
			document.getElementById("selectPath").innerHTML = info.data[0];
		}else{
			document.getElementById("selectPath").innerHTML = "";
		}
	}
	function onCropperClosed(info) {
		alert("onCropperClosed:" + info);
	}
	function cbSaveToPhotoAlbum(info) {
		alert("cbSaveToPhotoAlbum:" + info);
	}
	function cbClearOutputImages(info) {
		alert("cbClearOutputImages:" + info);
	}
</script>
</head>

<body>
<div class="tit">uexImage-View</div>
<div class="conbor">
    <div class="consj">
        <span>UI样式</span>
        <input class="textbox" type="text" id="UIStyle" value="1">
        <span>1.打开图片选择器</span>
        <input class='btn' type='button' value='openPicker' onclick='openPicker();'>
        <span>2.打开图片浏览器</span>
        <input class='btn' type='button' value='openBrowser' onclick='openBrowser();'>
        <span>3.图片剪裁</span>
        <input class='btn' type='button' value='1.openPicker' onclick='openPickerForCropper();'>
        <span>选择的图片路径为：</span>
        <div class='tcxx' id='selectPath'></div>
        <input class='btn' type='button' value='2.openCropper' onclick='openCropper();'>
        <span>4.储存到相册</span>
        <input class='btn' type='button' value='saveToPhotoAlbum' onclick='saveToPhotoAlbum();'>
        <span>5.清除由本插件导出的所有图片</span>
        <input class='btn' type='button' value='clearOutputImages' onclick='clearOutputImages();'>
        <span>6.压缩图片</span>
        <input class='btn' type='button' value='compressImage' onclick='compressImage();'>
    </div>
</div>
</body>
</html>
